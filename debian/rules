#!/usr/bin/make -f

#export DH_VERBOSE=1

PACKAGE		= stterm
ORIGBIN		= st

BIN		= $(PACKAGE)
PKGDIR		= $(CURDIR)/debian/$(PACKAGE)
BINDIR		= $(PKGDIR)/usr/bin
DOCROOTDIR	= $(SHAREROOTDIR)/doc
PKGDOCDIR	= $(DOCROOTDIR)/$(PACKAGE)

include debian/debian-vars.mk

man:
	$(MAKE) -C debian -f pod2man.mk PACKAGE=$(PACKAGE) makeman

override_dh_auto_install:
	# Upstream no good. Calls tic(1) which writes to $HOME
	# $(MAKE) PREFIX=/usr DESTDIR=$(PKGDIR) install

	# Rename binary to reflect "term"
	install -m 755 -D $(ORIGBIN) $(BINDIR)/$(BIN)

	install -m 755 -D \
		st.info$(ORIGBIN) \
		$(PKGDOCDIR)/examples/$(PACKAGE).terminfo

%:
	dh $@

.PHONY: man

# End of file
